(this["webpackJsonpreact-js"]=this["webpackJsonpreact-js"]||[]).push([[0],{31:function(e,t,a){e.exports=a(44)},36:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(15),l=a(9),s=a(18),c=a.n(s);a(36),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(4),i=a.n(u),m=a(8),p=a(5),d=a(11),h=a(12),f=a(2);var g=Object(d.b)((function(e){return{authenticate:e}}),(function(e){return{login:function(t,a){return e({type:"UPDATE",username:t,password:a})}}}))((function(e){var t,a=Object(r.useState)(""),l=Object(p.a)(a,2),s=l[0],c=l[1],u=Object(r.useState)(""),d=Object(p.a)(u,2),g=d[0],E=d[1],b=Object(r.useState)(""),w=Object(p.a)(b,2),v=w[0],y=w[1];return Object(r.useEffect)((function(){var t=localStorage.getItem("username"),a=localStorage.getItem("password");null!==t&&""!==t&&null!==a&&""!==a&&(e.login(t,a),e.history.push({pathname:"/Profile"}))}),[]),t=""!==s?n.a.createElement("p",{style:{paddingTop:20,color:"red"}},s):null,n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("p",null,"Friends"),n.a.createElement("p",{style:{borderStyle:"solid",borderColor:"white",borderRadius:5,padding:5}},"Please Login"),n.a.createElement(f.a,{onSubmit:function(t){t.preventDefault();var a=g,r=v;fetch("http://localhost:8080/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email="+a.trim()+"&password="+r.trim()+"&authType=regular"}).then(function(){var t=Object(m.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.json().then(function(){var t=Object(m.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"Logged In"===n.message?(e.login(g,v),localStorage.setItem("username",a.trim()),localStorage.setItem("password",r.trim()),e.history.push({pathname:"/Profile"})):c(n.message);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},n.a.createElement(f.a.Group,{controlId:"loginFormUsername"},n.a.createElement(f.a.Label,null,"Username"),n.a.createElement(f.a.Control,{type:"username",value:g,placeholder:"Enter Username",onChange:function(e){E(e.target.value)}})),n.a.createElement(f.a.Group,{controlId:"loginFormPassword"},n.a.createElement(f.a.Label,null,"Password"),n.a.createElement(f.a.Control,{type:"password",value:v,placeholder:"Password",onChange:function(e){y(e.target.value)}})),n.a.createElement(h.a,{variant:"primary",type:"submit"},"Sign In"),n.a.createElement(o.b,{to:"/register",className:"btn btn-link"},"Register")),n.a.createElement("div",null,n.a.createElement("p",{style:{fontSize:14,padding:20},onClick:function(){e.history.push({pathname:"/Forgot"})}},"Need help?")),t))}));var E=Object(d.b)((function(e){return{authenticate:e}}),(function(e){return{login:function(t,a){return e({type:"UPDATE",username:t,password:a})}}}))((function(e){var t,a=Object(r.useState)(""),o=Object(p.a)(a,2),l=o[0],s=o[1],c=Object(r.useState)(""),u=Object(p.a)(c,2),d=u[0],g=u[1];return Object(r.useEffect)((function(){var t=localStorage.getItem("username"),a=localStorage.getItem("password");null!==t&&""!==t&&null!==a&&""!==a&&(e.login(t,a),e.history.push({pathname:"/Profile"}))}),[]),t=""!==l?n.a.createElement("p",{style:{paddingTop:20,color:"red"}},l):null,n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("p",null,"Friends"),n.a.createElement("p",{style:{borderStyle:"solid",borderColor:"white",borderRadius:5,padding:5}},"Forgot Password"),n.a.createElement(f.a,{onSubmit:function(e){e.preventDefault(),fetch("http://localhost:8080/forgot-password",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email="+d.trim()}).then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.json().then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Reset password is sent"===t.message?s("Password reset link is sent to your email."):s(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},n.a.createElement(f.a.Group,{controlId:"loginFormEmail"},n.a.createElement(f.a.Label,null,"Email"),n.a.createElement(f.a.Control,{type:"email",value:d,placeholder:"Enter Email",onChange:function(e){g(e.target.value)}})),n.a.createElement(h.a,{variant:"primary",type:"submit"},"FORGOT")),n.a.createElement("div",null,n.a.createElement("p",{style:{fontSize:14,paddingTop:20},onClick:function(){e.history.push({pathname:"/"})}},"Cancel")),t))}));var b=Object(d.b)((function(e){return{authenticate:e}}),(function(e){return{login:function(t,a){return e({type:"UPDATE",username:t,password:a})}}}))((function(e){var t=Object(r.useState)(""),a=Object(p.a)(t,2),o=a[0],l=a[1],s=Object(r.useState)(""),c=Object(p.a)(s,2),u=c[0],d=c[1],g=Object(r.useState)(""),E=Object(p.a)(g,2),b=E[0],w=E[1],v=Object(r.useState)(""),y=Object(p.a)(v,2),O=y[0],S=y[1];Object(r.useEffect)((function(){var t=localStorage.getItem("username"),a=localStorage.getItem("password");null!==t&&""!==t&&null!==a&&""!==a?(e.login(t,a),e.history.push({pathname:"/Profile"})):P()}),[]);var j,P=function(){for(var e,t,a=window.location.href,r=/[?&]([^=#]+)=([^&#]*)/g,n={};t=r.exec(a);)n[t[1]]=t[2],"token"===t[1]&&(e=t[2]);""!==e&void 0!==e?(S(e),l("Please select new password.")):l("Url is tempered")};return j=""!==o?n.a.createElement("p",{style:{paddingTop:20,color:"red"}},o):null,n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("p",null,"Friends"),n.a.createElement("p",{style:{borderStyle:"solid",borderColor:"white",borderRadius:5,padding:5}},"Forgot Password"),n.a.createElement(f.a,{onSubmit:function(e){e.preventDefault();var t=u,a=b;t.length>=5&&t===a?fetch("http://localhost:8080/reset-password",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"password="+t.trim()+"&token="+O}).then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.json().then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Password successfully reset"===t.message?l("Password updated successfully."):l(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):l("Password should be 5 characters long and match.")}},n.a.createElement(f.a.Group,{controlId:"loginFormPassword"},n.a.createElement(f.a.Label,null,"Password"),n.a.createElement(f.a.Control,{type:"password",value:u,placeholder:"Password",onChange:function(e){d(e.target.value)}})),n.a.createElement(f.a.Group,{controlId:"loginFormPassword2"},n.a.createElement(f.a.Label,null,"Password (again)"),n.a.createElement(f.a.Control,{type:"password",value:b,placeholder:"Password",onChange:function(e){w(e.target.value)}})),n.a.createElement(h.a,{variant:"primary",type:"submit"},"RESET PASSWORD")),n.a.createElement("div",null,n.a.createElement("p",{style:{fontSize:14,paddingTop:20},onClick:function(){e.history.push({pathname:"/"})}},"Back to Login")),j))}));var w=Object(d.b)((function(e){return{authenticate:e}}),(function(e){return{login:function(t,a){return e({type:"UPDATE",username:t,password:a})}}}))((function(e){var t,a,o=Object(r.useState)(""),l=Object(p.a)(o,2),s=l[0],c=l[1],u=Object(r.useState)(""),d=Object(p.a)(u,2),g=d[0],E=d[1],b=Object(r.useState)(""),w=Object(p.a)(b,2),v=w[0],y=w[1],O=Object(r.useState)(""),S=Object(p.a)(O,2),j=S[0],P=S[1],C=Object(r.useState)(""),I=Object(p.a)(C,2),T=I[0],k=I[1],F=Object(r.useState)(""),x=Object(p.a)(F,2),N=x[0],A=x[1],L=Object(r.useState)(""),G=Object(p.a)(L,2),R=G[0],D=G[1];return Object(r.useEffect)((function(){var t=localStorage.getItem("username"),a=localStorage.getItem("password");null!==t&&""!==t&&null!==a&&""!==a?(y(t),P(a)):(e.login(t,a),e.history.push({pathname:"/"}))}),[]),t=""!==s?n.a.createElement("p",{style:{paddingTop:20,color:"red"}},s):null,a=""!==g?n.a.createElement("p",{style:{paddingTop:20,color:"red"}},g):null,n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("p",null,"Friends"),n.a.createElement("p",{style:{borderStyle:"solid",borderColor:"white",borderRadius:5,padding:5}},"Change Password"),n.a.createElement(f.a,{onSubmit:function(e){e.preventDefault();var t=N,a=R,r=T;r===j?(c(""),t.length>=5&&t===a?fetch("http://localhost:8080/change-password",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email="+v.trim()+"&password="+r.trim()+"&newPassword="+t.trim()+"&authType=regular"}).then(function(){var e=Object(m.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.json().then(function(){var e=Object(m.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Password changed"===a.message?(E("Password changed successfully."),localStorage.setItem("password",t)):E(a.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):E("Password should be 5 characters long and match.")):c("Password does not match current password.")}},n.a.createElement(f.a.Group,{controlId:"loginFormCurrentPassword"},n.a.createElement(f.a.Label,null,"Current Password"),n.a.createElement(f.a.Control,{type:"password",value:T,placeholder:"Current Password",onChange:function(e){k(e.target.value)}}),t),n.a.createElement(f.a.Group,{controlId:"loginFormPassword"},n.a.createElement(f.a.Label,null,"Password"),n.a.createElement(f.a.Control,{type:"password",value:N,placeholder:"Password",onChange:function(e){A(e.target.value)}})),n.a.createElement(f.a.Group,{controlId:"loginFormPassword2"},n.a.createElement(f.a.Label,null,"Password (again)"),n.a.createElement(f.a.Control,{type:"password",value:R,placeholder:"Password",onChange:function(e){D(e.target.value)}})),n.a.createElement(h.a,{variant:"primary",type:"submit"},"RESET PASSWORD")),n.a.createElement("div",null,n.a.createElement("p",{style:{fontSize:14,paddingTop:20},onClick:function(){e.history.push({pathname:"/Profile"})}},"Back / Cancel")),a))}));var v=Object(d.b)((function(e){return{authenticate:e}}),(function(e){return{login:function(t,a){return e({type:"UPDATE",username:t,password:a})}}}))((function(e){var t,a=Object(r.useState)(""),l=Object(p.a)(a,2),s=l[0],c=l[1],u=Object(r.useState)(""),d=Object(p.a)(u,2),g=d[0],E=d[1],b=Object(r.useState)(""),w=Object(p.a)(b,2),v=w[0],y=w[1],O=Object(r.useState)(""),S=Object(p.a)(O,2),j=S[0],P=S[1],C=Object(r.useState)(""),I=Object(p.a)(C,2),T=I[0],k=I[1],F=Object(r.useState)(""),x=Object(p.a)(F,2),N=x[0],A=x[1];return Object(r.useEffect)((function(){var t=localStorage.getItem("username"),a=localStorage.getItem("password");null!==t&&""!==t&&null!==a&&""!==a&&(e.login(t,a),e.history.push({pathname:"/Profile"}))}),[]),t=""===N.trim()?null:n.a.createElement("p",{style:{color:"red"}},N.trim()),n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("p",null,"Friends"),n.a.createElement("p",null,"We are glad you are going to become Friends User"),t,n.a.createElement("p",{style:{borderStyle:"solid",borderColor:"white",borderRadius:5,padding:5}},"Please Register"),n.a.createElement(f.a,{onSubmit:function(t){if(t.preventDefault(),""===s.trim()|""===g.trim()|""===T.trim()|""===v.trim()|""===j.trim())A("All fields are required. Please fill all of them.");else if(v.trim()===j.trim()){var a=g,r=T,n=v;fetch("http://localhost:8080/add-user",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"firstName="+s.trim()+"&lastName="+a.trim()+"&email="+r.trim()+"&password="+n.trim()+"&authType=regular"}).then(function(){var t=Object(m.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.json().then(function(){var t=Object(m.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"User Created"===a.message?(A(a.message),localStorage.setItem("username",r.trim()),localStorage.setItem("password",n.trim()),e.login(T,v),e.history.push({pathname:"/Profile"})):A(a.message);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}else A("Passwords don't match.")}},n.a.createElement(f.a.Group,{controlId:"loginFormFirstName"},n.a.createElement(f.a.Label,null,"First Name"),n.a.createElement(f.a.Control,{type:"username",value:s,placeholder:"Enter First Name",onChange:function(e){c(e.target.value)}})),n.a.createElement(f.a.Group,{controlId:"loginFormLastName"},n.a.createElement(f.a.Label,null,"Last Name"),n.a.createElement(f.a.Control,{type:"username",value:g,placeholder:"Enter Last Name",onChange:function(e){E(e.target.value)}})),n.a.createElement(f.a.Group,{controlId:"loginFormEmail"},n.a.createElement(f.a.Label,null,"Email"),n.a.createElement(f.a.Control,{type:"email",value:T,placeholder:"Enter Email",onChange:function(e){k(e.target.value)}})),n.a.createElement(f.a.Group,{controlId:"loginFormPassword"},n.a.createElement(f.a.Label,null,"Password"),n.a.createElement(f.a.Control,{type:"password",value:v,placeholder:"Password",onChange:function(e){y(e.target.value)}})),n.a.createElement(f.a.Group,{controlId:"loginFormPassword2"},n.a.createElement(f.a.Label,null,"Password (again)"),n.a.createElement(f.a.Control,{type:"password",value:j,placeholder:"Password",onChange:function(e){P(e.target.value)}})),n.a.createElement(h.a,{variant:"primary",type:"submit"},"Sign Up"),n.a.createElement(o.b,{to:"/",className:"btn btn-link"},"Cancel")),n.a.createElement("br",null),n.a.createElement("br",null)))}));var y=Object(d.b)((function(e){return{authenticate:e}}),(function(e){return{login:function(t,a){return e({type:"UPDATE",username:t,password:a})},signout:function(){return e({type:"LOGOUT"})}}}))((function(e){var t=Object(r.useState)(""),a=Object(p.a)(t,2),o=a[0],l=a[1],s=Object(r.useState)(""),c=Object(p.a)(s,2),u=c[0],d=c[1],g=Object(r.useState)(""),E=Object(p.a)(g,2),b=E[0],w=E[1],v=Object(r.useState)([]),y=Object(p.a)(v,2),O=y[0],S=y[1],j=Object(r.useState)([]),P=Object(p.a)(j,2),C=P[0],I=P[1];Object(r.useEffect)((function(){""===e.authenticate.user.trim()&&e.history.push({pathname:"/"}),F()}),[]);var T,k,F=function(){fetch("http://localhost:8080/all-friends",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email="+localStorage.getItem("username")+"&authType=regular&password="+localStorage.getItem("password")}).then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.json().then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Friends attached"===t.message?S(t.usersAll):w(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};T="special"===localStorage.getItem("login_type")?null:n.a.createElement("div",{style:{padding:10}},n.a.createElement(h.a,{onClick:function(){e.history.push({pathname:"/Change"})}},"CHANGE PASSWORD")),k=""!==b?n.a.createElement("p",{style:{paddingTop:20,color:"red"}},b):null;var x=n.a.createElement("div",null,O.map((function(e){return n.a.createElement("div",{key:e.email,style:{borderStyle:"solid",borderColor:"white",borderRadius:5,padding:5,margin:5}},n.a.createElement("li",{onClick:function(){return t=e.email,void fetch("http://localhost:8080/messages-user-and-friend",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"userEmail="+localStorage.getItem("username")+"&friendEmail="+t+"&authType=regular&password="+localStorage.getItem("password")}).then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.json().then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Messages attached"===t.message?I(t.msgs):w(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var t}},e.firstName," ",e.lastName," [",e.email,"]"))}))),N=n.a.createElement("div",null,C.map((function(e){return n.a.createElement("div",{key:e.sentAt,style:{borderStyle:"solid",borderColor:"white",borderRadius:5,padding:5,margin:5}},n.a.createElement("li",null,"From: ","   ",e.messageFromEmail,"    ","To: ","   ",e.messageToEmail),n.a.createElement("div",null,e.message),n.a.createElement("div",null,e.sentAt))})));return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},k,n.a.createElement("div",{style:{padding:10}},n.a.createElement(h.a,{onClick:function(){return localStorage.setItem("username",""),localStorage.setItem("password",""),localStorage.setItem("login_type",""),localStorage.setItem("account_type",""),localStorage.setItem("email",""),e.signout(),void e.history.push({pathname:"/"})}},"SIGN OUT")),T,n.a.createElement("p",null,"Friends"),n.a.createElement("p",null,"Hi ",localStorage.getItem("username")),n.a.createElement("p",{style:{borderStyle:"solid",borderColor:"white",borderRadius:5,padding:5}},"Send Message"),n.a.createElement(f.a,{onSubmit:function(e){e.preventDefault(),fetch("http://localhost:8080/send-message",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"message="+u+"&messageFromEmail="+localStorage.getItem("username")+"&messageToEmail="+o.trim()+"&authType=regular&password="+localStorage.getItem("password")}).then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.json().then(function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Message sent"===t.message?w("Message sent successfully."):w(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},n.a.createElement(f.a.Group,{controlId:"toEmail"},n.a.createElement(f.a.Label,null,"Email"),n.a.createElement(f.a.Control,{type:"email",value:o,placeholder:"Enter Email",onChange:function(e){l(e.target.value)}})),n.a.createElement(f.a.Group,{controlId:"toMessage"},n.a.createElement(f.a.Label,null,"Message"),n.a.createElement(f.a.Control,{as:"textarea",rows:"3",value:u,onChange:function(e){d(e.target.value)}})),n.a.createElement(h.a,{variant:"primary",type:"submit"},"SEND")),x,N))})),O=a(20),S=Object(O.b)((function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE":return{loggedIn:!0,user:e.username,userPassword:e.password};case"LOGOUT":default:return{loggedIn:!1,user:"",userPassword:""}}})),j=n.a.createElement(d.a,{store:S},n.a.createElement(o.a,null,n.a.createElement("div",null,n.a.createElement(l.a,{exact:!0,path:"/",component:g}),n.a.createElement(l.a,{exact:!0,path:"/Register",component:v}),n.a.createElement(l.a,{path:"/Forgot",component:E}),n.a.createElement(l.a,{path:"/reset-password",component:b}),n.a.createElement(l.a,{path:"/Change",component:w}),n.a.createElement(l.a,{path:"/Profile",component:y})))),P=document.getElementById("root");c.a.render(j,P),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.57e5b0a1.chunk.js.map